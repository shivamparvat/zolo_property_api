(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{7686:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/userprofile",function(){return l(4665)}])},5220:function(e,a){"use strict";a.Z=e=>new Promise((a,l)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>{var e;return a((null===(e=s.result)||void 0===e?void 0:e.toString())||"")},s.onerror=()=>l(s.error)})},4665:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return b}});var s=l(5893),t=l(7294),n=l(3408),i=l(2175),r=l(6310),o=l(9473),c=l(1163),d=l(5675),m=l.n(d),u=l(5292),h=l(4779),v=l(1192),x=l(9471),p=l(1800),N=l(5220),j=l(5379),b=()=>{let e=(0,c.useRouter)(),a=(0,o.I0)(),[l,d]=(0,t.useState)(""),[b,f]=(0,t.useState)(null);(0,o.v9)(e=>{var a,l;return null===(l=e.login)||void 0===l?void 0:null===(a=l.userToken)||void 0===a?void 0:a.token});let _=(0,o.v9)(e=>e.login.userToken);(0,o.v9)(e=>{var a,l;return null===(l=e.login)||void 0===l?void 0:null===(a=l.userToken)||void 0===a?void 0:a.user_id}),(0,o.v9)(e=>{var a;return null===(a=e.login)||void 0===a?void 0:a.userToken});let g={first_name:r.Z_().required("First Name is required").min(2,"First Name must be at least 2 characters").max(50,"First Name can be at most 50 characters"),last_name:r.Z_().required("Last Name is required").min(2,"Last Name must be at least 2 characters").max(50,"Last Name can be at most 50 characters"),email:r.Z_().required("Email is required").email("Invalid email format").max(100,"Email can be at most 100 characters"),contact_number:r.Z_().required("Phone Number is required").min(10,"Phone Number must be at least 10 digits").max(10,"Phone Number can be at most 10 digits").matches(/^[0-9]+$/,"Phone Number must contain only digits"),zip_code:r.Rx().required("Zip Code is required"),city:r.Z_().required("City is required")},[y,w]=(0,t.useState)(""),[Z,k]=(0,t.useState)(),[L]=(0,t.useState)({first_name:null==_?void 0:_.first_name,last_name:null==_?void 0:_.last_name,email:null==_?void 0:_.email,role:null==_?void 0:_.role,contact_number:null==_?void 0:_.contact_number,city:null==_?void 0:_.city,state:null==_?void 0:_.state,address:null==_?void 0:_.address}),q=window.innerWidth>=1200&&window.innerWidth<1400,z=()=>{e.back()},E=e=>{var a,l;if(null==e?void 0:null===(l=e.target)||void 0===l?void 0:null===(a=l.files)||void 0===a?void 0:a.length){if(e.target.files[0].size>1048576)e.target.value="",(0,p.ZP)(p.vU,"Image size should not exceed 1 MB.");else{let File=e.target.files[0];k(File),(0,N.Z)(File).then(e=>w(e))}}},P=async l=>{a((0,u.N)(!0));try{let s=new FormData;Z&&(s.append("image",Z),s.append("oldImage","")),s.append("first_name",l.first_name.trim()),s.append("last_name",l.last_name.trim()),s.append("email",l.email.trim()),s.append("contact_number",l.contact_number),s.append("zip_code",l.zip_code),s.append("city",l.city.trim());let t=await h.Z.put("user/update",s,null==_?void 0:_.user_id,!0);200==t.status&&(a((0,x.o4)(null==t?void 0:t.data)),a((0,u.N)(!1)),a((0,v.d)(!0)),k(null),w(""),e.back())}catch(e){console.log(e),a((0,u.N)(!1))}finally{a((0,u.N)(!1))}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card-datatable ".concat(q?"table-responsive-xl":"table-responsive-xxl"),children:(0,s.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,s.jsxs)("div",{className:"card-header flex-column flex-md-row d-flex justify-content-between align-items-center mb-3",children:[(0,s.jsx)("h4",{className:"col-md-6 mb-2 mb-md-0",children:"User Profile"}),(0,s.jsx)("div",{className:"btn-close p-2",onClick:()=>z()})]}),(0,s.jsx)("div",{className:"row w-100 m-auto",children:(0,s.jsx)(i.J9,{enableReinitialize:!0,onSubmit:P,initialValues:L,validationSchema:r.Ry().shape(g),children:e=>{let{values:a,setValues:l,errors:t,handleSubmit:r}=e;return(0,s.jsxs)(n.Z,{onSubmit:r,children:[(0,s.jsxs)("div",{className:"d-flex gap-column justify-content-between ",children:[(0,s.jsxs)("div",{className:"avatar-upload mb-3 ",children:[(0,s.jsxs)("div",{className:"avatar-edit",children:[(0,s.jsx)("input",{type:"file",id:"imageUpload",accept:".png, .jpg, .jpeg",onChange:E}),(0,s.jsx)("label",{htmlFor:"imageUpload"})]}),(0,s.jsx)("div",{className:"position-relative avatar-preview",children:(0,s.jsx)(m(),{src:(null==_?void 0:_.image)||"/assets/img/profile.png",alt:"profile Image",width:200,height:200,className:"rounded-circle object-fit-cover"})})]}),(0,s.jsxs)("div",{className:"w-50",children:[(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"First Name"})}),(0,s.jsx)(i.gN,{type:"text",id:"first_name",placeholder:"First Name",name:"first_name",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"first_name",component:"div"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Last Name"})}),(0,s.jsx)(i.gN,{type:"text",placeholder:"Last Name",id:"last_name",name:"last_name",className:"form-control-alternative form-control "}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"last_name",component:"div"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Email"})}),(0,s.jsx)(i.gN,{type:"email",placeholder:"Email",name:"email",id:"email",disabled:!0,className:"form-control-alternative form-control "}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"email",component:"div"})]})]})]}),(0,s.jsxs)("div",{className:"d-flex gap-column justify-content-between ",children:[(0,s.jsxs)("div",{className:"w-50",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Phone Number"})}),(0,s.jsx)(i.gN,{type:"number",placeholder:"phone Number",name:"contact_number",id:"contact_number",className:"form-control-alternative form-control"}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"contact_number",component:"div"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Role"})}),(0,s.jsx)(i.gN,{as:"select",name:"role",id:"role",disabled:!0,className:"form-control-alternative form-control",children:(null==_?void 0:_.role)==="admin"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"select role"}),j.$Y.map((e,a)=>(0,s.jsx)("option",{value:j.Wn[e],children:j.Wn[e].toUpperCase()},a))]}):(0,s.jsx)("option",{selected:!0,value:"user",children:"USER"})}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"role",component:"div"})]})]}),(0,s.jsxs)("div",{className:"w-50",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"City"})}),(0,s.jsx)(i.gN,{type:"city",placeholder:"city",id:"city",name:"city",className:"form-control-alternative form-control "}),(0,s.jsx)(i.Bc,{className:"text-danger",name:"city",component:"div"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(n.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"zip codes"})}),(0,s.jsx)(i.gN,{type:"text",id:"zip_code",name:"zip_code",placeholder:"Enter zip codes",className:"form-control-alternative form-control "}),(0,s.jsx)(i.Bc,{name:"zip_code",component:"div"})]})]})]}),(0,s.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-primary mt-5 d-block text-uppercase",children:"Update Profile"})})]})}})})]})})})})}}},function(e){e.O(0,[958,774,888,179],function(){return e(e.s=7686)}),_N_E=e.O()}]);