"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{4090:function(e,a,t){t.d(a,{i:function(){return s}});let s=e=>{let a=new Date(e),t=a.toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!0});return t}},9849:function(e,a,t){t.d(a,{Z:function(){return S}});var s=t(5893),l=t(5049),n=t(7294),i=t(9473),r=t(3023),d=t(4090),c=t(6704),o=t(5379),m=t(8711),p=t(5675),h=t.n(p),u=t(4779),x=t(5292),v=t(2175),j=t(3408),b=t(1191),N=t(6310),_=t(1192),g=t(1441),w=t(1800),y=t(7582),f=t(5810),Z=e=>{let{id:a,onClose:t,isActive:l,data:r,type:d,urls:c,path:m}=e,[p,h]=(0,n.useState)(d==o.P7?{lat:22,lng:78}:{lat:((null==r?void 0:r.coordinates)||[])[0]||22,lng:((null==r?void 0:r.coordinates)||[])[1]||78}),[Z,P]=(0,n.useState)(null==r?void 0:r.banner),k={ads_name:N.Z_().required("Name is required"),title:N.Z_().required("Title is required"),description:N.Z_().required("Description is required"),show_number:N.O7().default(!0),show_map:N.O7().default(!0),number:N.Z_().required("Number is required"),city:N.Z_().required("City is required"),zip_code:N.Rx().required("Zip code is required"),expiry_date:N.hT()},[S]=(0,n.useState)({ads_name:d==o.P7?"":r.ads_name,title:d==o.P7?"":r.title,description:d==o.P7?"":r.description,show_number:d!=o.P7&&r.show_number,show_map:d!=o.P7&&r.show_map,number:d==o.P7?"":r.number,city:d==o.P7?"":r.city,zip_code:d==o.P7?"":r.zip_code,expiry_date:d==o.P7?(()=>{let e=new Date,a=new Date(e);return a.setDate(e.getDate()+30),a})():r.expiry_date,coordinates:d==o.P7?{lat:22,lng:78}:{lat:((null==r?void 0:r.coordinates)||[])[0]||22,lng:((null==r?void 0:r.coordinates)||[])[1]||78}}),[C,A]=(0,n.useState)(d===o.P7?[]:r.galleryUrls),[B,q]=(0,n.useState)([]),[F,z]=(0,n.useState)([]),L=(0,i.I0)();(0,i.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.token}),(0,i.v9)(e=>e.recallApi.recallApi);let D=async e=>{let s;L((0,x.N)(!0));try{let l=new FormData;if(l.append("ads_name",e.ads_name.trim()),l.append("title",e.title.trim()),l.append("description",e.description.trim()),l.append("number",e.number),l.append("city",e.city),l.append("zip_code",e.zip_code),l.append("expiry_date",e.expiry_date),l.append("show_number",e.show_number),l.append("show_map",e.show_map),Z&&l.append("banner",Z),p.lat&&p.lng)Object.values(p||{}).map(e=>{l.append("coordinates[]",e)});else throw(0,w.ZP)(w.vU,"coordinates is required"),Error("coordinates is required");B.length&&Object.values(B||{}).map(e=>{l.append("images",e)}),(null==C?void 0:C.length)?C.map((e,a)=>{(null==B?void 0:B.length)<=a&&l.append("gallery[]",e)}):(l.append("gallery[]",""),l.delete("banner"),l.append("banner","")),B&&F&&F.map(e=>[l.append("oldImages[]",e)]),s=d===o.P7?await u.Z.post(c,l,0,!0):await u.Z.put(c,l,a,!0),200==s.status&&(L((0,x.N)(!1)),L((0,_.d)(!0)),t(""))}catch(e){L((0,x.N)(!1))}finally{L((0,x.N)(!1))}};return(0,s.jsxs)(b.Z,{show:l,onHide:()=>t(""),dialogClassName:"modal-lg",style:{marginLeft:"23px"},backdrop:"static",children:[(0,s.jsx)(b.Z.Header,{closeButton:!0,children:(0,s.jsx)(b.Z.Title,{children:(0,s.jsxs)("h3",{children:[d===o.P7?"Add":"Edit"," ",m]})})}),(0,s.jsx)(b.Z.Body,{children:(0,s.jsx)(v.J9,{enableReinitialize:!0,onSubmit:D,initialValues:S,validationSchema:N.Ry().shape(k),children:e=>{let{values:a,setValues:t}=e;return(0,s.jsxs)(v.l0,{children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6 col-sm-12",children:[(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Ad name"})}),(0,s.jsx)(v.gN,{type:"text",id:"ads_name",placeholder:"Ad Name",name:"ads_name",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"ads_name",component:"div"})]}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"number"})}),(0,s.jsx)(v.gN,{type:"text",id:"number",placeholder:"number",name:"number",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"number",component:"div"})]})}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Zip code"})}),(0,s.jsx)(v.gN,{type:"text",id:"zip_code",placeholder:"zip code",name:"zip_code",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"zip_code",component:"div"})]})}),(0,s.jsxs)("div",{className:"d-flex mt-3",children:[(0,s.jsxs)("div",{className:"mt-2 me-5",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"show number in Ad"})}),(0,s.jsx)("div",{children:(0,s.jsx)(f.Z,{name:"show_number",onChange:()=>t({...a,show_number:!(null==a?void 0:a.show_number)}),checked:(null==a?void 0:a.show_number)||!1,uncheckedIcon:!1,checkedIcon:!1,onColor:"#009EFB",offColor:"#dcdcdc",className:"status-switch"})}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"show_number",component:"div"})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"show map in Ad"})}),(0,s.jsx)("div",{children:(0,s.jsx)(f.Z,{onChange:()=>t({...a,show_map:!(null==a?void 0:a.show_map)}),checked:(null==a?void 0:a.show_map)||!1,uncheckedIcon:!1,checkedIcon:!1,onColor:"#009EFB",offColor:"#dcdcdc",className:"status-switch"})}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"show_map",component:"div"})]})]})]}),(0,s.jsxs)("div",{className:"w-50",children:[(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"title"})}),(0,s.jsx)(v.gN,{type:"text",id:"title",placeholder:"Title",name:"title",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"title",component:"div"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"Description"})}),(0,s.jsx)(v.gN,{as:"textarea",rows:4,type:"textarea",placeholder:"Description",id:"description",name:"description",className:"form-control-alternative form-control"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"description",component:"div"})]}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"city"})}),(0,s.jsx)(v.gN,{type:"text",id:"city",placeholder:"city",name:"city",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"city",component:"div"})]})}),(0,s.jsx)("div",{className:"w-100",children:(0,s.jsxs)("div",{className:"w-100",children:[(0,s.jsx)(j.Z.Label,{className:"form-control-label",children:(0,s.jsx)("h6",{children:"expiry date"})}),(0,s.jsx)(v.gN,{type:"date",id:"expiry_date",placeholder:"expiry date",name:"expiry_date",className:"form-control-alternative form-control w-100"}),(0,s.jsx)(v.Bc,{className:"text-danger",name:"expiry_date",component:"div"})]})})]})]}),(0,s.jsx)("hr",{}),(0,s.jsx)(y.Z,{Coordinates:p,setCoordinates:h}),(0,s.jsx)(g.Z,{selectedFile:C,setSelectedFile:A,setFiles:q,Files:B,setDeletedFile:z,banner:Z,setBanner:P}),(0,s.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,s.jsxs)("button",{type:"submit",className:"btn btn-primary mt-5 d-block text-uppercase",children:[d===o.P7?"Add":"Update"," ",m]})})]})}})})]})},P=t(7435);let k=["ads_name","city","number","expiry_date","title","description","show_number","show_map"];var S=()=>{var e;P.Z.path="ads";let a=(0,i.I0)(),t=(0,i.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.token}),p=(0,i.v9)(e=>e.recallApi.recallApi),[u,x]=(0,n.useState)(1),[v,j]=(0,n.useState)(o.Wh),[b,N]=(0,n.useState)({list:[],pagination:{total:0}}),[_,g]=(0,n.useState)({}),[w,y]=(0,n.useState)(""),[f,S]=(0,n.useState)(!1),[C,A]=(0,n.useState)({post_id:0});(0,n.useEffect)(()=>(P.Z.get(u,v,N),()=>{}),[v,t,a,u,p]);let B=[{value:"S.No",index:!0},{key:"ads_name",value:"Ad"},{value:"Post Image",component:e=>{var a;let{data:t}=e;return(0,s.jsx)("div",{onClick:()=>{A(t),S(!0)},children:(null==t?void 0:null===(a=t.galleryUrls)||void 0===a?void 0:a.length)>0?t.galleryUrls.map((e,a)=>a<3?(0,s.jsx)(h(),{src:e||"/img/profile.png",alt:"Ads",width:36,height:36,className:"avatar avatar-sm"},a):4===a?(0,s.jsx)("span",{children:"..."},a):void 0):(0,s.jsx)(h(),{src:"/img/profile.png",alt:"category_image",width:36,height:36,className:"avatar avatar-sm"})})}},{key:"title",value:"title"},{key:"description",value:"Description"},{value:"Address",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:"".concat(a.city||""," ").concat(a.zip_code||"")})}},{value:"expiry date",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,d.i)(a.expiry_date)})}},{key:"created_at",value:"Created At",component:e=>{let{data:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,d.i)(a.createdAt)})}},{value:"Status",component:e=>{let{data:a}=e;return(0,s.jsx)(r.OF,{data:a})}},{value:"Action",component:e=>{let{data:a}=e;return(0,s.jsx)(r.EY,{data:a,setSelected:g,setEdit:y,id:a.post_id})},className:"d-flex "}];return(0,s.jsxs)(s.Fragment,{children:[(w===o.P7||w===o.bk)&&(0,s.jsx)(Z,{id:_._id||0,isActive:w===o.P7||w===o.bk,onClose:y,data:{..._,id:_._id},type:w==o.P7?o.P7:o.bk,urls:w==o.P7?"".concat("ads","/add"):"".concat("ads","/update"),path:"ads"}),(0,s.jsx)("div",{className:"card bg-white",children:(0,s.jsx)("div",{className:"card-datatable",children:(0,s.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,s.jsx)(m.ZP,{title:"List of ".concat("ads"),onAddClick:()=>y(o.P7),onExportClick:()=>{P.Z.download()},disable:[m.bi]}),(0,s.jsx)(l.ZP,{filter:v,disable:[l.dd,l.e_],setFilter:j,orderBy:k}),(0,s.jsx)(r.ZP,{tableCustomize:B,data:b&&(null==b?void 0:b.list),StartIndex:+v.limit*(+u-1)+1||1}),(0,s.jsx)(c.Z,{currentPage:u||0,limit:v.limit,setCurrentPage:x,total:b&&(null===(e=b.pagination)||void 0===e?void 0:e.total)||0})]})})})]})}}}]);